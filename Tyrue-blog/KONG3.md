---
title: KONG3
date: 2024-08-27 12:41:17
tags: 杂题
password: yiranappl11024
description: KONG3，这是我第三个做题记录，包含各种各样题的题解
categories: 笔记
---

$$2024.08.24\to \cdots$$

! 未做

## Luogu

### !P4585

把询问和更改都放到线段树上，更改是左端点到最后，询问是一段区间，每次要类似下放的操作，用 `vector` 存下上方带有查询的节点编号

每次查询是从 $[l,r]$ 查询可持久化树状数组 

感觉太难写了啊，遂不写

### P2710

平衡树模板，调调调不出来！。

### P4768

`Kruskal` 重构树和最短路

问题描述的是，求出一条路径 $v\rarr mid\rarr 1$ ，其中 $v\rarr mid$ 路径上的所有边的 $a>p$ ，要求 $\min\{w_{mid\rarr 1}\}$ ，其中第二部分可以考虑求出中间点之后，用提前与处理的最短路求出，考虑第一部分怎么求

其实就是求出给定点 $v$ 一个到其他点路径上海拔最小值大于给定 $p$ 的点集

这就是 `Kruskal` 重构树

然后我们按照边权从大到小排序，依次建树即可

考虑找到重构树上一点 $u$ 点权小于给定值，那他的子树内其他点也一定都满足，需要求出 $\min_{v\in son_u} dis_{v\rarr 1}$ ，直接一遍 `dfs` 类似 `dp` 求出即可

## Atcoder

### AT_abc368_f

直接 `NIM` 游戏，计算 $SG(x)$ 函数值， ~~首先打表能发现 $SG(x)$ 值等于 $x$ 的质因子个数~~

其实就是把质因子看成石子，然后一个数 $x$ 是一堆，每次把它变成他的因子就是去除一个质因子，这一堆的 $mex$ 就是质因子个数，为啥，假设 $x$ 一共有 $cnt$ 个质因子，我们最多只能选 $cnt-1$ 个，选完对应的结果就是后手必败，题目要求，其次是一个都不选，那就还剩 $cnt$ 个，所以我们一共能选 $[0,cnt-1]$ 个，那 $mex$ 就是 $cnt$

### AT_abc368_g

题目里说答案在 $10^{18}$ 一下，如果全是乘法， $1$ 是没有贡献的，所以有贡献的只有 $b_i>1$ ，所以最大不会超过 $60$ 个这样的 $b_i$ ，直接把这些数字记下来，位置 `set` 里面，然后跑 $O(60)$ 的 `dp` 即可

### AT_abc358_e & AT_abc234_f

写啥都写不会。服了，然后开始水题

设 $dp_{i,j}$ 表示前 $i$ 种字母，选了 $j$ 个

转移 $dp_{i,j}=\sum_{k\in [0,\min\{c_i,j\}]} dp_{i-1,j-k}\times \binom{j}{k}$ 

简单易懂

## Codeforces

### CF1550F

老样子，先考虑暴力怎么做？暴力连边 $n^2$ 条，边权就是 $\Big||a_i-a_j|-d\Big|$ ，然后从起点 $s$ 出发，计算到每个终点 $t$ 所有路径上最大值的最小值

$tips:$
> 这是一个重要的 $trick$ 图上两点间所有路径上最大值的最小值为该图的最小生成树上两点间简单路径上最大边权

但是我们总不能 $n^2$ 建出图然后跑最小生成树吧，这里又有一个算是？ $trick$ 的东西

$tips:$
> 考虑最小生成树算法 `boruvka` ，每次找到两个集合中 **最小边** ，合并集合

所以我们尽量开始的时候对于每个集合，找到和他贡献最小的其他集合的连边

观察式子

$$\Big||a_i-a_j|-d\Big|$$
$$|a_i-a_j-d|,i>j$$
$$|a_j-a_i-d|=|a_i+d-a_j|,i<j$$

我们发现， $a_j$ 对于 $a_i$ 的贡献，是和 $a_i\plusmn d$ 进行比较的，所以找到的最小权值 $a_j$ 一定是最接近这个 $a_i\plusmn d$

考虑怎样才能保证 $j$ 和 $i$ 还未联通呢？也就是不在一个集合里呢？

可以提前计算出 $j$ 左边和右边第一个和自己不同集合的位置，这样就可以直接计算了，并且也是最接近的

最后一遍 `dfs` 计算树上两点间路径最大值即可